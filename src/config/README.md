# 微信交易类型映射配置

## 文件说明

`wechat-transaction-mapping.json` 文件包含了微信账单交易类型的自定义映射配置，用于将交易对方名称智能映射为更准确的交易类型分类。

## 配置结构

```json
{
  "分类名称": [
    "商户名称1",
    "商户名称2",
    ...
  ],
  "关键词推断": {
    "分类名称": ["关键词1", "关键词2", ...]
  }
}
```

## 当前支持的分类

1. **餐饮美食** - 餐厅、快餐、咖啡店、奶茶店等
2. **交通出行** - 打车、加油、停车、公交地铁、机票火车票等
3. **购物消费** - 电商平台、超市、便利店、专卖店等
4. **生活服务** - 快递物流、房屋租赁、家政服务等
5. **医疗健康** - 医院、药店、体检、在线医疗等
6. **教育培训** - 学费、培训机构、在线教育等
7. **娱乐休闲** - 视频网站、游戏、音乐、电影院等
8. **金融理财** - 银行、理财产品、保险、基金等
9. **转账红包** - 微信转账、红包、群收款等
10. **充值缴费** - 话费、水电费、宽带费等

## 映射逻辑

系统会按以下优先级进行匹配：

1. **精确匹配** - 完全匹配商户名称
2. **模糊匹配** - 部分匹配商户名称（优先匹配更长的关键词）
3. **关键词推断** - 基于关键词智能推断交易类型
4. **默认分类** - 如果都没匹配到，归类为"其他消费"

## 如何添加新的映射

### 添加新商户

在对应分类的数组中添加新的商户名称：

```json
{
  "餐饮美食": [
    "麦当劳",
    "肯德基",
    "新增的餐厅名称"  // 添加新商户
  ]
}
```

### 添加新分类

1. 添加新的分类和商户列表：

```json
{
  "新分类名称": [
    "商户1",
    "商户2"
  ]
}
```

2. 在关键词推断中添加对应的关键词：

```json
{
  "关键词推断": {
    "新分类名称": ["关键词1", "关键词2"]
  }
}
```

### 添加关键词

在关键词推断部分添加新的关键词，用于智能推断：

```json
{
  "关键词推断": {
    "餐饮美食": ["餐", "食", "饭", "新关键词"]
  }
}
```

## 注意事项

1. **商户名称要准确** - 建议使用微信账单中实际显示的商户名称
2. **避免重复** - 同一个商户不要在多个分类中重复出现
3. **关键词要精准** - 关键词应该具有较强的分类指向性，避免歧义
4. **JSON格式** - 修改后请确保JSON格式正确，可以使用在线JSON验证工具检查

## 测试配置

修改配置后，可以通过以下方式测试：

```bash
# 在项目根目录执行
node -e "
const fs = require('fs');
const config = JSON.parse(fs.readFileSync('./src/config/wechat-transaction-mapping.json', 'utf8'));
console.log('配置加载成功！');
console.log('分类数量:', Object.keys(config).length);
"
```

## 维护建议

1. **定期更新** - 根据实际使用情况，定期添加新出现的商户名称
2. **优化关键词** - 根据映射效果，调整和优化关键词列表
3. **分类调整** - 根据需要，可以调整分类名称或合并/拆分分类
4. **备份配置** - 重要修改前建议备份原配置文件
